<mxfile host="65bd71144e">
    <diagram id="PB2nDQA0OPlF9RZzvlh6" name="Page-1">
        <mxGraphModel dx="1889" dy="2016" grid="0" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" background="#FFFFFF" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="6" value="&lt;font style=&quot;font-size: 18px;&quot;&gt;&lt;b style=&quot;&quot;&gt;&lt;u style=&quot;&quot;&gt;Rate Limitter&lt;/u&gt;&lt;/b&gt;&lt;/font&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;Configuration:&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;1. time_window (00:00 to 23:59)&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;2. Number of requests&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;&lt;b&gt;&lt;font style=&quot;&quot;&gt;Requirements&lt;/font&gt;&lt;/b&gt;:&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;1. Rate limit the users based on userID and their tire (free or premium)&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;2. Support 4 types (and extensible)[token bucket, fixed window, sliding window log, sliding window counter]&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;3. Thread safe and efficient&lt;/font&gt;&lt;/div&gt;" style="text;align=left;html=1;verticalAlign=middle;whiteSpace=wrap;rounded=0;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" vertex="1" parent="1">
                    <mxGeometry x="479" y="-1091" width="780" height="179" as="geometry"/>
                </mxCell>
                <mxCell id="7" value="&lt;&lt;enum&gt;&gt;&#xa;UserTier" style="swimlane;startSize=40;" vertex="1" parent="1">
                    <mxGeometry x="70" y="-840" width="120" height="90" as="geometry">
                        <mxRectangle x="90" y="-870" width="90" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="8" value="&lt;b&gt;Free&lt;/b&gt;&lt;div&gt;&lt;b&gt;PREMIUM&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="7">
                    <mxGeometry x="10" y="45" width="80" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="14" style="edgeStyle=none;html=1;exitX=0;exitY=0.75;exitDx=0;exitDy=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;" edge="1" parent="1" source="11" target="7">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="11" value="User" style="swimlane;startSize=40;" vertex="1" parent="1">
                    <mxGeometry x="230" y="-840" width="120" height="90" as="geometry">
                        <mxRectangle x="90" y="-870" width="90" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="12" value="&lt;b&gt;- UserId: string&lt;/b&gt;&lt;div&gt;&lt;b&gt;- tier: UserTier&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="11">
                    <mxGeometry x="10" y="45" width="110" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="15" value="RateLimiterService" style="swimlane;startSize=40;" vertex="1" parent="1">
                    <mxGeometry x="54" y="-687" width="220" height="95" as="geometry">
                        <mxRectangle x="90" y="-870" width="90" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="16" value="&lt;b&gt;- rateLimiters: &lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;Map&amp;lt;UserTier, RateLimiter&amp;gt;&lt;/b&gt;&lt;div&gt;&lt;b&gt;+ allowRequest(user) : bool&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="15">
                    <mxGeometry x="10" y="35" width="210" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="17" value="&lt;&lt;abstract&gt;&gt;&#xa;RateLimiter" style="swimlane;startSize=40;" vertex="1" parent="1">
                    <mxGeometry x="599" y="-687" width="200" height="120" as="geometry">
                        <mxRectangle x="90" y="-870" width="90" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="18" value="&lt;b&gt;# config: RateLimitConfig&lt;/b&gt;&lt;div&gt;&lt;b&gt;# type: RateLimitType&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;+ allowRequest(userId): bool&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="17">
                    <mxGeometry x="5" y="40" width="190" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="31" style="edgeStyle=none;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.75;entryY=1;entryDx=0;entryDy=0;endArrow=block;endFill=0;" edge="1" parent="1" source="19">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="1060" y="-370" as="sourcePoint"/>
                        <mxPoint x="798.9999999999998" y="-567" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="19" value="SlidingWindowCounter" style="swimlane;startSize=40;" vertex="1" parent="1">
                    <mxGeometry x="910" y="-370" width="183" height="120" as="geometry">
                        <mxRectangle x="90" y="-870" width="90" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="20" value="&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;+ allowRequest(userId): bool&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="19">
                    <mxGeometry x="5" y="55" width="182" height="41" as="geometry"/>
                </mxCell>
                <mxCell id="30" style="edgeStyle=none;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;endArrow=block;endFill=0;" edge="1" parent="1" source="21" target="17">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="21" value="SlidingWindowLogs" style="swimlane;startSize=40;" vertex="1" parent="1">
                    <mxGeometry x="697" y="-367" width="183" height="120" as="geometry">
                        <mxRectangle x="90" y="-870" width="90" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="22" value="&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;+ allowRequest(userId): bool&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="21">
                    <mxGeometry x="5" y="55" width="182" height="41" as="geometry"/>
                </mxCell>
                <mxCell id="29" style="edgeStyle=none;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.25;entryY=1;entryDx=0;entryDy=0;endArrow=block;endFill=0;" edge="1" parent="1" source="23" target="17">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="23" value="FixedWindow" style="swimlane;startSize=40;" vertex="1" parent="1">
                    <mxGeometry x="479" y="-367" width="180" height="120" as="geometry">
                        <mxRectangle x="90" y="-870" width="90" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="24" value="&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;+ allowRequest(userId): bool&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="23">
                    <mxGeometry x="5" y="55" width="182" height="41" as="geometry"/>
                </mxCell>
                <mxCell id="28" style="edgeStyle=none;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;endArrow=block;endFill=0;" edge="1" parent="1" source="25">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="598" y="-566" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="480" y="-474"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="25" value="TokenBucket" style="swimlane;startSize=40;" vertex="1" parent="1">
                    <mxGeometry x="246" y="-367" width="182" height="120" as="geometry">
                        <mxRectangle x="90" y="-870" width="90" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="26" value="&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;+ allowRequest(userId): bool&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="25">
                    <mxGeometry x="5" y="55" width="182" height="41" as="geometry"/>
                </mxCell>
                <mxCell id="32" style="edgeStyle=none;html=1;entryX=-0.034;entryY=0.079;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="15" target="18">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="33" value="&lt;&lt;enum&gt;&gt;&#xa;RateLimitType" style="swimlane;startSize=40;" vertex="1" parent="1">
                    <mxGeometry x="1228" y="-840" width="202" height="114" as="geometry">
                        <mxRectangle x="90" y="-870" width="90" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="34" value="&lt;b&gt;TOKEN_BUCKET&lt;/b&gt;&lt;div&gt;&lt;b&gt;FIXED_WINDOW&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;SLIDING_WINDOW_LOGS&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;SLIDING_WINDOW_COUNTER&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="33">
                    <mxGeometry x="5" y="44" width="192" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="35" value="RateLimitConfig" style="swimlane;startSize=40;" vertex="1" parent="1">
                    <mxGeometry x="1228" y="-637" width="220" height="95" as="geometry">
                        <mxRectangle x="90" y="-870" width="90" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="36" value="&lt;b&gt;- maxRequests: int&lt;/b&gt;&lt;div&gt;&lt;b&gt;- windowInSeconds: int&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="35">
                    <mxGeometry x="10" y="45" width="152" height="41" as="geometry"/>
                </mxCell>
                <mxCell id="37" value="RateLimiterFactory" style="swimlane;startSize=40;" vertex="1" parent="1">
                    <mxGeometry x="1214" y="-406" width="220" height="95" as="geometry">
                        <mxRectangle x="90" y="-870" width="90" height="30" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="38" value="&lt;b&gt;+ createRateLimiter(algo, config)&lt;/b&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="37">
                    <mxGeometry x="10" y="53" width="205" height="26" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>